<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnimeApi</title>
    <link rel="stylesheet" href="style.css">
    
</head>

<body>
    <h2>Welcome to Anime list</h2>
    <div class="container">
      
        <input id="myInput" class="myInput" placeholder="search anime here,more...">
        <button id="btn1" onclick="search()">Search</button>
        <button onclick="myFunction()">dark mode</button>
    </div>

            


    <div id="b2">

    </div>

    <script>
        function myFunction() {
   var element = document.body;
   element.classList.toggle("dark-mode");
}

        


        function search() {

            var value = document.getElementById("myInput").value

            if (value == "" || null) {
                alert("Fill the field")
            }

            else {
                viewinfo()
            }

        }
             
        
        async function viewinfo() {
            try {
                const api = "https://api.jikan.moe/v3";
                var value = document.getElementById("myInput").value
                

                var data = await fetch(api + "/search/anime?q=" + value + "&page=1")
                var res = await data.json();
                console.log(res);

                var len = res.results.length
                console.log(len);
                for (var i = 0; i < len; i++) {
                    const element = res.results[i]

                    var img = document.createElement("img")
                    img.src = element.image_url
                    img.style.marginTop = "60px"
                    img.style.marginBottom = "60px"
                    img.style.display = "block"
                    img.style.marginLeft = "auto"
                    img.style.marginRight = "auto"
                    img.style.width = "550px"
                    img.style.height = "480px"
                    img.style.padding="20px"

                    document.getElementById("b2").append(img)

                    var title = document.createElement("div")
                    title.innerText = "Title : " + element.title
                    title.style.textAlign="center"
                    title.style.fontSize="35px"
                    document.getElementById("b2").append(title)


                    var episode = document.createElement("div")
                    episode.innerText = "Episode : " + element.episodes
                    episode.style.textAlign="center"
                    document.getElementById("b2").append(episode)

                    var start = document.createElement("div")
                    start.innerText = "Start Date : " + element.start_date
                    start.style.textAlign="center"
                    document.getElementById("b2").append(start)

                    var end = document.createElement("div")
                    end.innerText = "End Date : " + element.end_date
                    end.style.textAlign="center"
                    document.getElementById("b2").append(end)

                    var type = document.createElement("div")
                    type.innerText = "Type : " + element.type
                    type.style.textAlign="center"
                    document.getElementById("b2").append(type)

                    var imdb = document.createElement("div")
                    imdb.innerText = "IMDB Rating : " + element.score
                    imdb.style.textAlign="center"
                    document.getElementById("b2").append(imdb)

                    var synp = document.createElement("p")
                    synp.innerText = "Fore read : " + element.synopsis
                    synp.style.textAlign="center"
                    document.getElementById("b2").append(synp)

                }
            } catch (error) {
                console.error()
            }
        }

    </script>


</body>

</html>